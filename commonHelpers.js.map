{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nfunction fetchImages(key, inputForSearch) {\n  const searchParams = new URLSearchParams({\n    key,\n    q: inputForSearch.value.trim(),\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n  });\n\n  return fetch(`https://pixabay.com/api/?${searchParams}`).then(response => {\n    if (!response.ok) {\n      iziToast.error({\n        message: `Error number ${response.status}!`,\n        position: 'topRight',\n      });\n      throw new Error();\n    }\n    return response.json();\n  });\n}\n\nexport default fetchImages;\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nfunction renderImages(images) {\n  if (!images.length) {\n    iziToast.error({\n      message:\n        'Sorry, there are no images matching your search query. Please try again!',\n      position: 'topRight',\n    });\n  }\n  const markupImages = images\n    .map(image => {\n      return `\n            <li class=\"item\">\n            <a href=\"${image.largeImageURL}\">\n            <img src=\"${image.webformatURL}\" alt=\"${image.tags}\">\n            </a>\n            <div class=\"item-content\">\n            <div>\n            <h3 class=\"title\">Likes</h3>\n            <p class=\"amount\">${image.likes}</p>\n            </div>\n            <div>\n            <h3 class=\"title\">Views</h3>\n            <p class=\"amount\">${image.views}</p>\n            </div>\n            <div>\n            <h3 class=\"title\">Comments</h3>\n            <p class=\"amount\">${image.comments}</p>\n            </div>\n            <div>\n            <h3 class=\"title\">Downloads</h3>\n            <p class=\"amount\">${image.downloads}</p>\n            </div>\n            </div>\n            </li>\n            `;\n    })\n    .join('');\n  return markupImages;\n}\n\nexport default renderImages;\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport fetchImages from './js/pixabay-api';\nimport renderImages from './js/render-functions';\n\nconst form = document.querySelector('.form');\nconst searchInput = form.elements.input;\nconst imagesList = document.querySelector('.container');\nconst loadingMessage = document.querySelector('.loader');\n\nconst apiKey = '43199917-ac2cc136e7963c28457226ad3';\n\nform.addEventListener('submit', searchImages);\n\nfunction searchImages(event) {\n  event.preventDefault();\n  imagesList.innerHTML = '';\n  if (!searchInput.value.trim()) {\n    iziToast.error({\n      message: 'Your query does not contain any letters!',\n      position: 'topRight',\n    });\n    return;\n  }\n  loadingMessage.classList.remove('is-hidden');\n  fetchImages(apiKey, searchInput)\n    .then(images => {\n      loadingMessage.classList.add('is-hidden');\n      if (!images.hits) {\n        iziToast.error({\n          message: 'There is a problem, data is missing on the server',\n          position: 'topRight',\n        });\n        throw new Error();\n      }\n      imagesList.insertAdjacentHTML('beforeend', renderImages(images.hits));\n      lightbox.refresh();\n    })\n    .catch(() => loadingMessage.classList.add('is-hidden'));\n}\n\nconst lightbox = new SimpleLightbox('.container a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n"],"names":["fetchImages","key","inputForSearch","searchParams","response","iziToast","renderImages","images","image","form","searchInput","imagesList","loadingMessage","apiKey","searchImages","event","lightbox","SimpleLightbox"],"mappings":"6vBAGA,SAASA,EAAYC,EAAKC,EAAgB,CACxC,MAAMC,EAAe,IAAI,gBAAgB,CACvC,IAAAF,EACA,EAAGC,EAAe,MAAM,KAAM,EAC9B,WAAY,QACZ,YAAa,aACb,WAAY,EAChB,CAAG,EAED,OAAO,MAAM,4BAA4BC,CAAY,EAAE,EAAE,KAAKC,GAAY,CACxE,GAAI,CAACA,EAAS,GACZ,MAAAC,EAAS,MAAM,CACb,QAAS,gBAAgBD,EAAS,MAAM,IACxC,SAAU,UAClB,CAAO,EACK,IAAI,MAEZ,OAAOA,EAAS,MACpB,CAAG,CACH,CCnBA,SAASE,EAAaC,EAAQ,CAC5B,OAAKA,EAAO,QACVF,EAAS,MAAM,CACb,QACE,2EACF,SAAU,UAChB,CAAK,EAEkBE,EAClB,IAAIC,GACI;AAAA;AAAA,uBAEUA,EAAM,aAAa;AAAA,wBAClBA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA,gCAK9BA,EAAM,KAAK;AAAA;AAAA;AAAA;AAAA,gCAIXA,EAAM,KAAK;AAAA;AAAA;AAAA;AAAA,gCAIXA,EAAM,QAAQ;AAAA;AAAA;AAAA;AAAA,gCAIdA,EAAM,SAAS;AAAA;AAAA;AAAA;AAAA,aAK1C,EACA,KAAK,EAAE,CAEZ,CChCA,MAAMC,EAAO,SAAS,cAAc,OAAO,EACrCC,EAAcD,EAAK,SAAS,MAC5BE,EAAa,SAAS,cAAc,YAAY,EAChDC,EAAiB,SAAS,cAAc,SAAS,EAEjDC,EAAS,qCAEfJ,EAAK,iBAAiB,SAAUK,CAAY,EAE5C,SAASA,EAAaC,EAAO,CAG3B,GAFAA,EAAM,eAAc,EACpBJ,EAAW,UAAY,GACnB,CAACD,EAAY,MAAM,OAAQ,CAC7BL,EAAS,MAAM,CACb,QAAS,2CACT,SAAU,UAChB,CAAK,EACD,MACD,CACDO,EAAe,UAAU,OAAO,WAAW,EAC3CZ,EAAYa,EAAQH,CAAW,EAC5B,KAAKH,GAAU,CAEd,GADAK,EAAe,UAAU,IAAI,WAAW,EACpC,CAACL,EAAO,KACV,MAAAF,EAAS,MAAM,CACb,QAAS,oDACT,SAAU,UACpB,CAAS,EACK,IAAI,MAEZM,EAAW,mBAAmB,YAAaL,EAAaC,EAAO,IAAI,CAAC,EACpES,EAAS,QAAO,CACtB,CAAK,EACA,MAAM,IAAMJ,EAAe,UAAU,IAAI,WAAW,CAAC,CAC1D,CAEA,MAAMI,EAAW,IAAIC,EAAe,eAAgB,CAClD,aAAc,MACd,aAAc,GAChB,CAAC"}